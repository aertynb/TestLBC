{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import{Table,TableBody,TableCell,TableContainer,TableRow,TableHead,Paper,Button}from'@mui/material';import{LinearProgress,CircularProgress,Typography}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MemberList(){const[members,setMembers]=useState([]);const[isLoading,setIsLoading]=useState(true);const navigate=useNavigate();const isFirstRender=useRef(true);const fetchData=async()=>{try{setIsLoading(true);const response=await fetch('/api/member');const data=await response.json();// If it's the first render, set the members directly.\n// For subsequent renders, append new members to the existing array.\nsetMembers(isFirstRender.current?data:prevMembers=>[...prevMembers,...data]);setIsLoading(false);console.log(data);}catch(error){console.error('Error fetching data:',error);setIsLoading(false);}};useEffect(()=>{fetchData();},[]);useEffect(()=>{// Set isFirstRender to false after the first render.\nisFirstRender.current=false;},[]);if(isLoading){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LinearProgress,{}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),/*#__PURE__*/_jsx(CircularProgress,{disableShrink:true})]});}const handleRefresh=()=>{// Reset members on refresh to avoid duplicates.\nsetMembers([]);fetchData();};const handleRowClick=id=>{navigate(\"member/\".concat(id));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",gutterBottom:true,children:\"Member List\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleRefresh,children:\"Refresh\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Date of Creation\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:members.map(member=>/*#__PURE__*/_jsxs(TableRow,{onClick:()=>handleRowClick(member.id),children:[/*#__PURE__*/_jsx(TableCell,{children:member.id}),/*#__PURE__*/_jsx(TableCell,{children:member.name}),/*#__PURE__*/_jsx(TableCell,{children:member.dateOfCreation})]},member.id))})]})})]});}export default MemberList;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","Table","TableBody","TableCell","TableContainer","TableRow","TableHead","Paper","Button","LinearProgress","CircularProgress","Typography","jsx","_jsx","jsxs","_jsxs","MemberList","members","setMembers","isLoading","setIsLoading","navigate","isFirstRender","fetchData","response","fetch","data","json","current","prevMembers","console","log","error","children","disableShrink","handleRefresh","handleRowClick","id","concat","variant","component","gutterBottom","color","onClick","map","member","name","dateOfCreation"],"sources":["C:/Users/theoc/test/test/src/reactapp/src/MemberList.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Table, TableBody, TableCell, TableContainer, TableRow, TableHead, Paper, Button } from '@mui/material';\r\nimport { LinearProgress, CircularProgress, Typography } from '@mui/material';\r\n\r\nfunction MemberList() {\r\n    const [members, setMembers] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const navigate = useNavigate();\r\n    const isFirstRender = useRef(true);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const response = await fetch('/api/member');\r\n            const data = await response.json();\r\n\r\n            // If it's the first render, set the members directly.\r\n            // For subsequent renders, append new members to the existing array.\r\n            setMembers(isFirstRender.current ? data : prevMembers => [...prevMembers, ...data]);\r\n\r\n            setIsLoading(false);\r\n            console.log(data);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Set isFirstRender to false after the first render.\r\n        isFirstRender.current = false;\r\n    }, []);\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div>\r\n                <LinearProgress />\r\n                <p>Loading...</p>\r\n                <CircularProgress disableShrink />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleRefresh = () => {\r\n        // Reset members on refresh to avoid duplicates.\r\n        setMembers([]);\r\n        fetchData();\r\n    }\r\n\r\n    const handleRowClick = (id) => {\r\n        navigate(`member/${id}`);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Typography variant=\"h4\" component=\"div\" gutterBottom>\r\n                Member List\r\n            </Typography>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={handleRefresh}>\r\n                Refresh\r\n            </Button>\r\n            <TableContainer component={Paper}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell>ID</TableCell>\r\n                            <TableCell>Name</TableCell>\r\n                            <TableCell>Date of Creation</TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {members.map((member) => (\r\n                            <TableRow key={member.id} onClick={() => handleRowClick(member.id)}>\r\n                                <TableCell>{member.id}</TableCell>\r\n                                <TableCell>{member.name}</TableCell>\r\n                                <TableCell>{member.dateOfCreation}</TableCell>\r\n                            </TableRow>\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MemberList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}